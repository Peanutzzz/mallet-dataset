demo service impl lcn transaction transactional rollback for exception class override public string execute string value string ex flag string flag string d resp service b client rpc value step2 call remote service b string e resp service c client rpc value step3 execute local transaction demo demo new demo demo set group id trace context trace group id demo set demo field value demo set create time new date demo set app name transaction get application id demo mapper save demo dtx if object non null ex flag throw new illegal state exception by ex flag return d resp e resp ok service a 
demo service impl override lcn transaction transactional rollback for exception class public string rpc string value demo demo new demo demo set group id trace context trace group id demo set demo field value demo set app name transaction get application id demo set create time new date demo mapper save demo return ok service b 
demo service impl override lcn transaction transactional rollback for exception class public string rpc string value demo demo new demo demo set demo field value demo set create time new date demo set app name transaction get application id demo set group id trace context trace group id demo mapper save demo if equal value throw new illegal state exception by test return ok service c 
