instance controller can distro patch mapping secure parser name resource parser class action action type write public string patch http servlet request request throw exception string service name web util require request common param service name string namespace id web util optional request common param namespace id constant default namespace id string ip web util require request ip string port web util require request port string cluster web util optional request common param cluster name string util empty if string util be blank cluster cluster web util optional request cluster util and common default cluster name instance instance service manager get instance namespace id service name cluster ip integer parse int port if instance null throw new illegal argument exception instance not find string metadata web util optional request metadata string util empty if string util be not blank metadata instance set metadata util and common parse metadata metadata string app web util optional request app string util empty if string util be not blank app instance set app app string weight web util optional request weight string util empty if string util be not blank weight instance set weight double parse double weight string healthy web util optional request healthy string util empty if string util be not blank healthy instance set healthy boolean util to boolean healthy string enable string web util optional request enable string util empty if string util be not blank enable string instance set enable boolean util to boolean enable string instance set last beat system current time millis instance validate service manager update instance namespace id service name instance return ok 
