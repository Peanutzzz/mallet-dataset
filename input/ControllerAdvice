exception advice controller advice public class exception advice extend default exception advice 
exception advice controller advice public class exception advice extend default exception advice 
exception advice controller advice public class exception advice extend default exception advice 
global default exception handler controller advice public class global default exception handler private gson gson new gson private static type map type new type token map string object get type private static final logger logger logger factory get logger global default exception handler class exception exception handler throwable class public response entity map string object exception http servlet request request throwable ex return handle error request internal server error ex exception handler http request method not support exception class http media type exception class public response entity map string object bad request http servlet request request servlet exception ex return handle error request bad request ex warn exception handler http status code exception class public response entity map string object rest template exception http servlet request request http status code exception ex return handle error request ex get status code ex exception handler access deny exception class public response entity map string object access deny http servlet request request access deny exception ex return handle error request forbid ex exception exception handler abstract apollo http exception class public response entity map string object bad request http servlet request request abstract apollo http exception ex return handle error request ex get http status ex exception handler method argument not valid exception class public response entity map string object handle method argument not valid exception http servlet request request method argument not valid exception ex final optional object error first error ex get bind result get all error stream find first if first error be present final string first error message first error get get default message return handle error request bad request new bad request exception first error message return handle error request bad request ex exception handler constraint violation exception class public response entity map string object handle constraint violation exception http servlet request request constraint violation exception ex return handle error request bad request new bad request exception ex get message private response entity map string object handle error http servlet request request http status status throwable ex return handle error request status ex error private response entity map string object handle error http servlet request request http status status throwable ex level log level string message ex get message print log message ex log level map string object error attribute new hash map boolean error handle false if ex instanceof http status code exception try try to extract the original error info if it be throw from apollo program e g admin service error attribute gson from json http status code exception ex get response body as string map type status http status code exception ex get status code error handle true catch throwable th ignore if error handle error attribute put status status value error attribute put message message error attribute put timestamp local date time now format date time formatter iso local date time error attribute put exception ex get class get name http header header new http header header set content type media type application json u t f8 return new response entity error attribute header status log level error warn debug info trace private void print log string message throwable ex level log level switch log level case error logger error message ex break case warn logger warn message ex break case debug logger debug message ex break case info logger info message ex break case trace logger trace message ex break tracer log error ex 
global exception handler controller advice public class global exception handler for illegal argument exception we be return void with status code as so we error page will be use in this case throw illegal argument exception illegal argument exception exception handler illegal argument exception class public response entity string handle illegal argument exception exception ex throw i o exception metric monitor get illegal argument exception increment return response entity status body exception util get all exception msg ex for naco exception throw naco exception naco exception exception handler naco exception class public response entity string handle naco exception naco exception ex throw i o exception metric monitor get naco exception increment return response entity status ex get err code body exception util get all exception msg ex for datum access exception throw datum access exception datum access exception exception handler datum access exception class public response entity string handle datum access exception datum access exception ex throw datum access exception metric monitor get db exception increment return response entity status body exception util get all exception msg ex 
console exception handler controller advice public class console exception handler private static final logger logger logger factory get logger console exception handler class exception handler access exception class private response entity string handle access exception access exception e return response entity status http status forbid body e get err msg exception handler illegal argument exception class private response entity string handle illegal argument exception illegal argument exception e return response entity status http status bad request body exception util get all exception msg e exception handler exception class private response entity string handle exception exception e logger error console e return response entity status http status internal server error body exception util get all exception msg e 
response exception handler controller advice public class response exception handler handle link naco exception param e naco exception return response entity exception handler naco exception class public response entity string handle naco exception naco exception e logger srv log error get exception e get err msg exception util get all exception msg e return response entity status e get err code body e get message handle link illegal argument exception param ex illegal argument exception return response entity exception handler illegal argument exception class public response entity string handle parameter error illegal argument exception ex loggers srv log error get exception ex get message exception util get all exception msg ex return response entity status http status bad request body ex get message handle miss request parameter exception param ex link miss servlet request parameter exception return response entity exception handler miss servlet request parameter exception class public response entity string handle miss param miss servlet request parameter exception ex loggers srv log error get exception exception util get all exception msg ex string name ex get parameter name return response entity status http status bad request body parameter name be miss handle other exception param e other exception return response entity exception handler exception class public response entity string handle exception exception e logger srv log error get exception exception util get all exception msg e return response entity status http status internal server error body exception util get all exception msg e 
sentinel spring mvc block handler config controller advice order public class sentinel spring mvc block handler config private logger logger logger factory get logger this get class exception handler block exception class response body public result wrapper sentinel block handler block exception e abstract rule rule e get rule log logger info block by sentinel rule to string return object return result wrapper block exception handler exception class response body public result wrapper exception handler exception e logger error system error e get message return new result wrapper system error 
sentinel spring mvc block handler config controller advice order public class sentinel spring mvc block handler config private logger logger logger factory get logger this get class exception handler block exception class response body public result wrapper sentinel block handler block exception e logger warn block by sentinel e get rule return the customized result return result wrapper block 
