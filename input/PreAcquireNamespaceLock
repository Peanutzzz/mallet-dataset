item controller pre acquire namespace lock post mapping app app id cluster cluster name namespace namespace name item public item d t o create path variable app id string app id path variable cluster name string cluster name path variable namespace name string namespace name request body item d t o dto item entity bean util transform item class dto config change content builder builder new config change content builder item manage entity item service find one app id cluster name namespace name entity get key if manage entity null throw new bad request exception item already exist entity item service save entity builder create item entity dto bean util transform item d t o class entity commit commit new commit commit set app id app id commit set cluster name cluster name commit set namespace name namespace name commit set change set builder build commit set datum change create by dto get datum change last modify by commit set datum change last modify by dto get datum change last modify by commit service save commit return dto 
item controller pre acquire namespace lock put mapping app app id cluster cluster name namespace namespace name item item id public item d t o update path variable app id string app id path variable cluster name string cluster name path variable namespace name string namespace name path variable item id long item id request body item d t o item d t o item entity bean util transform item class item d t o config change content builder builder new config change content builder item manage entity item service find one item id if manage entity null throw new bad request exception item not exist item before update item bean util transform item class manage entity protect only value comment last modify by can be modify manage entity set value entity get value manage entity set comment entity get comment manage entity set datum change last modify by entity get datum change last modify by entity item service update manage entity builder update item before update item entity item d t o bean util transform item d t o class entity if builder have content commit commit new commit commit set app id app id commit set cluster name cluster name commit set namespace name namespace name commit set change set builder build commit set datum change create by item d t o get datum change last modify by commit set datum change last modify by item d t o get datum change last modify by commit service save commit return item d t o 
item controller pre acquire namespace lock delete mapping item item id public void delete path variable item id long item id request param string operator item entity item service find one item id if entity null throw new not find exception item not find for item id item id item service delete entity get id operator namespace namespace namespace service find one entity get namespace id commit commit new commit commit set app id namespace get app id commit set cluster name namespace get cluster name commit set namespace name namespace get namespace name commit set change set new config change content builder delete item entity build commit set datum change create by operator commit set datum change last modify by operator commit service save commit 
item set controller pre acquire namespace lock post mapping app app id cluster cluster name namespace namespace name itemset public response entity void create path variable string app id path variable string cluster name path variable string namespace name request body item change set change set item set service update set app id cluster name namespace name change set return response entity status http status ok build 
