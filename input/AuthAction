authority rule controller get mapping rule auth action privilege type read rule public result list authority rule entity api query all rule for machine request param string app request param string ip request param integer port if string util be empty app return result of fail app can not be null or empty if string util be empty ip return result of fail ip can not be null or empty if port null port return result of fail invalid parameter port try list authority rule entity rule sentinel api client fetch authority rule of machine app ip port rule repository save all rule return result of success rule catch throwable throwable logger error error when query authority rule throwable return result of fail throwable get message 
authority rule controller post mapping rule auth action privilege type write rule public result authority rule entity api add authority rule request body authority rule entity entity result authority rule entity check result check entity internal entity if check result null return check result entity set id null date date new date entity set gmt create date entity set gmt modify date try entity repository save entity catch throwable throwable logger error fail to add authority rule throwable return result of throwable throwable if publish rule entity get app entity get ip entity get port logger info publish authority rule fail after rule add return result of success entity 
authority rule controller put mapping rule id auth action privilege type write rule public result authority rule entity api update param flow rule path variable id long id request body authority rule entity entity if id null id return result of fail invalid id result authority rule entity check result check entity internal entity if check result null return check result entity set id id date date new date entity set gmt create null entity set gmt modify date try entity repository save entity if entity null return result of fail fail to save authority rule catch throwable throwable logger error fail to save authority rule throwable return result of throwable throwable if publish rule entity get app entity get ip entity get port logger info publish authority rule fail after rule update return result of success entity 
authority rule controller delete mapping rule id auth action privilege type delete rule public result long api delete rule path variable id long id if id null return result of fail id can not be null authority rule entity old entity repository find by id id if old entity null return result of success null try repository delete id catch exception e return result of fail e get message if publish rule old entity get app old entity get ip old entity get port logger error publish authority rule fail after rule delete return result of success id 
degrade controller response body request mapping rule json auth action privilege type read rule public result list degrade rule entity query machine rule string app string ip integer port if string util be empty app return result of fail app can t be null or empty if string util be empty ip return result of fail ip can t be null or empty if port null return result of fail port can t be null try list degrade rule entity rule sentinel api client fetch degrade rule of machine app ip port rule repository save all rule return result of success rule catch throwable throwable logger error query app error throwable return result of throwable throwable 
degrade controller response body request map new json auth action privilege type write rule public result degrade rule entity add string app string ip integer port string limit app string resource double count integer time window integer grade if string util be blank app return result of fail app can t be null or empty if string util be blank ip return result of fail ip can t be null or empty if port null return result of fail port can t be null if string util be blank limit app return result of fail limit app can t be null or empty if string util be blank resource return result of fail resource can t be null or empty if count null return result of fail count can t be null if time window null return result of fail time window can t be null if grade null return result of fail grade can t be null if grade rule constant degrade grade rt grade rule constant degrade grade exception count return result of fail invalid grade grade degrade rule entity entity new degrade rule entity entity set app app trim entity set ip ip trim entity set port port entity set limit app limit app trim entity set resource resource trim entity set count count entity set time window time window entity set grade grade date date new date entity set gmt create date entity set gmt modify date try entity repository save entity catch throwable throwable logger error add error throwable return result of throwable throwable if publish rule app ip port logger info publish degrade rule fail after rule add return result of success entity 
degrade controller response body request mapping save json auth action privilege type write rule public result degrade rule entity update if not null long id string app string limit app string resource double count integer time window integer grade if id null return result of fail id can t be null if grade null if grade rule constant degrade grade rt grade rule constant degrade grade exception count return result of fail invalid grade grade degrade rule entity entity repository find by id id if entity null return result of fail id id dose not exist if string util be not blank app entity set app app trim if string util be not blank limit app entity set limit app limit app trim if string util be not blank resource entity set resource resource trim if count null entity set count count if time window null entity set time window time window if grade null entity set grade grade date date new date entity set gmt modify date try entity repository save entity catch throwable throwable logger error save error throwable return result of throwable throwable if publish rule entity get app entity get ip entity get port logger info publish degrade rule fail after rule update return result of success entity 
degrade controller response body request map delete json auth action privilege type delete rule public result long delete long id if id null return result of fail id can t be null degrade rule entity old entity repository find by id id if old entity null return result of success null try repository delete id catch throwable throwable logger error delete error throwable return result of throwable throwable if publish rule old entity get app old entity get ip old entity get port logger info publish degrade rule fail after rule delete return result of success id 
flow controller v1 get mapping rule auth action privilege type read rule public result list flow rule entity api query machine rule request param string app request param string ip request param integer port if string util be empty app return result of fail app can t be null or empty if string util be empty ip return result of fail ip can t be null or empty if port null return result of fail port can t be null try list flow rule entity rule sentinel api client fetch flow rule of machine app ip port rule repository save all rule return result of success rule catch throwable throwable logger error error when query flow rule throwable return result of throwable throwable 
flow controller v1 post mapping rule auth action privilege type write rule public result flow rule entity api add flow rule request body flow rule entity entity result flow rule entity check result check entity internal entity if check result null return check result entity set id null date date new date entity set gmt create date entity set gmt modify date entity set limit app entity get limit app trim entity set resource entity get resource trim try entity repository save entity publish rule entity get app entity get ip entity get port get time unit millisecond return result of success entity catch throwable t throwable e t instanceof execution exception t get cause t logger error fail to add new flow rule app ip entity get app entity get ip e return result of fail e get message 
flow controller v1 put map save json auth action privilege type write rule public result flow rule entity api update flow rule long id string app string limit app string resource integer grade double count integer strategy string ref resource integer control behavior integer warm up period sec integer max queueing time ms if id null return result of fail id can t be null flow rule entity entity repository find by id id if entity null return result of fail id id dose not exist if string util be not blank app entity set app app trim if string util be not blank limit app entity set limit app limit app trim if string util be not blank resource entity set resource resource trim if grade null if grade grade return result of fail grade must be or but grade get entity set grade grade if count null entity set count count if strategy null if strategy strategy strategy return result of fail strategy must be in but strategy get entity set strategy strategy if strategy if string util be blank ref resource return result of fail ref resource can t be null or empty when strategy entity set ref resource ref resource trim if control behavior null if control behavior control behavior control behavior return result of fail control behavior must be in but control behavior get if control behavior warm up period sec null return result of fail warm up period sec can t be null when control behavior if control behavior max queueing time ms null return result of fail max queueing time ms can t be null when control behavior entity set control behavior control behavior if warm up period sec null entity set warm up period sec warm up period sec if max queueing time ms null entity set max queueing time ms max queueing time ms date date new date entity set gmt modify date try entity repository save entity if entity null return result of fail save entity fail null publish rule entity get app entity get ip entity get port get time unit millisecond return result of success entity catch throwable t throwable e t instanceof execution exception t get cause t logger error error when update flow rule app ip rule id entity get app entity get ip id e return result of fail e get message 
flow controller v1 delete mapping delete json auth action privilege type write rule public result long api delete flow rule long id if id null return result of fail id can t be null flow rule entity old entity repository find by id id if old entity null return result of success null try repository delete id catch exception e return result of fail e get message try publish rule old entity get app old entity get ip old entity get port get time unit millisecond return result of success id catch throwable t throwable e t instanceof execution exception t get cause t logger error error when delete flow rule app ip id old entity get app old entity get ip id e return result of fail e get message 
gateway api controller get mapping list json auth action auth service privilege type read rule public result list api definition entity query apis string app string ip integer port if string util be empty app return result of fail app can t be null or empty if string util be empty ip return result of fail ip can t be null or empty if port null return result of fail port can t be null try list api definition entity apis sentinel api client fetch apis app ip port get repository save all apis return result of success api catch throwable throwable logger error query apis error throwable return result of throwable throwable 
gateway api controller post map new json auth action auth service privilege type write rule public result api definition entity add api http servlet request request request body add api req vo req vo string app req vo get app if string util be blank app return result of fail app can t be null or empty api definition entity entity new api definition entity entity set app app trim string ip req vo get ip if string util be blank ip return result of fail ip can t be null or empty entity set ip ip trim integer port req vo get port if port null return result of fail port can t be null entity set port port api string api name req vo get api name if string util be blank api name return result of fail api name can t be null or empty entity set api name api name trim list api predicate item vo predicate item req vo get predicate item if collection util be empty predicate item return result of fail predicate item can t empty list api predicate item entity predicate item entity new array list for api predicate item vo predicate item predicate item api predicate item entity predicate item entity new api predicate item entity integer match strategy predicate item get match strategy if array as list url match strategy exact url match strategy prefix url match strategy regex contain match strategy return result of fail invalid match strategy match strategy predicate item entity set match strategy match strategy string pattern predicate item get pattern if string util be blank pattern return result of fail pattern can t be null or empty predicate item entity set pattern pattern predicate item entity add predicate item entity entity set predicate item new link hash set predicate item entity api list api definition entity all apis repository find all by machine machine info of app trim ip trim port if all api stream map o o get api name any match o o equal api name trim return result of fail api name exist api name date date new date entity set gmt create date entity set gmt modify date try entity repository save entity catch throwable throwable logger error add gateway api error throwable return result of throwable throwable if publish apis app ip port logger warn publish gateway apis fail after add return result of success entity 
gateway api controller post mapping save json auth action auth service privilege type write rule public result api definition entity update api request body update api req vo req vo string app req vo get app if string util be blank app return result of fail app can t be null or empty long id req vo get id if id null return result of fail id can t be null api definition entity entity repository find by id id if entity null return result of fail api do not exist id id list api predicate item vo predicate item req vo get predicate item if collection util be empty predicate item return result of fail predicate item can t empty list api predicate item entity predicate item entity new array list for api predicate item vo predicate item predicate item api predicate item entity predicate item entity new api predicate item entity int match strategy predicate item get match strategy if array as list url match strategy exact url match strategy prefix url match strategy regex contain match strategy return result of fail invalid match strategy match strategy predicate item entity set match strategy match strategy string pattern predicate item get pattern if string util be blank pattern return result of fail pattern can t be null or empty predicate item entity set pattern pattern predicate item entity add predicate item entity entity set predicate item new link hash set predicate item entity date date new date entity set gmt modify date try entity repository save entity catch throwable throwable logger error update gateway api error throwable return result of throwable throwable if publish apis app entity get ip entity get port logger warn publish gateway apis fail after update return result of success entity 
gateway api controller post mapping delete json auth action auth service privilege type delete rule public result long delete api long id if id null return result of fail id can t be null api definition entity old entity repository find by id id if old entity null return result of success null try repository delete id catch throwable throwable logger error delete gateway api error throwable return result of throwable throwable if publish apis old entity get app old entity get ip old entity get port logger warn publish gateway apis fail after delete return result of success id 
gateway flow rule controller get mapping list json auth action auth service privilege type read rule public result list gateway flow rule entity query flow rule string app string ip integer port if string util be empty app return result of fail app can t be null or empty if string util be empty ip return result of fail ip can t be null or empty if port null return result of fail port can t be null try list gateway flow rule entity rule sentinel api client fetch gateway flow rule app ip port get repository save all rule return result of success rule catch throwable throwable logger error query gateway flow rule error throwable return result of throwable throwable 
gateway flow rule controller post map new json auth action auth service privilege type write rule public result gateway flow rule entity add flow rule request body add flow rule req vo req vo string app req vo get app if string util be blank app return result of fail app can t be null or empty gateway flow rule entity entity new gateway flow rule entity entity set app app trim string ip req vo get ip if string util be blank ip return result of fail ip can t be null or empty entity set ip ip trim integer port req vo get port if port null return result of fail port can t be null entity set port port api route id api integer resource mode req vo get resource mode if resource mode null return result of fail resource mode can t be null if array as list resource mode route id resource mode custom api name contain resource mode return result of fail invalid resource mode resource mode entity set resource mode resource mode api string resource req vo get resource if string util be blank resource return result of fail resource can t be null or empty entity set resource resource trim gateway param flow item vo param item req vo get param item if param item null gateway param flow item entity item entity new gateway param flow item entity entity set param item item entity client i p remote host header url cookie integer parse strategy param item get parse strategy if array as list param parse strategy client ip param parse strategy host param parse strategy header param parse strategy url param param parse strategy cookie contain parse strategy return result of fail invalid parse strategy parse strategy item entity set parse strategy param item get parse strategy header url cookie if array as list param parse strategy header param parse strategy url param param parse strategy cookie contain parse strategy string field name param item get field name if string util be blank field name return result of fail field name can t be null or empty item entity set field name param item get field name string pattern param item get pattern if string util be not empty pattern item entity set pattern pattern integer match strategy param item get match strategy if array as list param match strategy exact param match strategy contain param match strategy regex contain match strategy return result of fail invalid match strategy match strategy item entity set match strategy match strategy qp integer grade req vo get grade if grade null return result of fail grade can t be null if array as list flow grade thread flow grade qp contain grade return result of fail invalid grade grade entity set grade grade qp double count req vo get count if count null return result of fail count can t be null if count return result of fail count should be at lease zero entity set count count long interval req vo get interval if interval null return result of fail interval can t be null if interval return result of fail interval should be greater than zero entity set interval interval integer interval unit req vo get interval unit if interval unit null return result of fail interval unit can t be null if array as list interval unit second interval unit minute interval unit hour interval unit day contain interval unit return result of fail invalid interval unit interval unit entity set interval unit interval unit integer control behavior req vo get control behavior if control behavior null return result of fail control behavior can t be null if array as list control behavior default control behavior rate limiter contain control behavior return result of fail invalid control behavior control behavior entity set control behavior control behavior if control behavior default control behavior burst size integer burst req vo get burst if burst null return result of fail burst can t be null if burst return result of fail invalid burst burst entity set burst burst else if control behavior rate limiter control behavior integer max queue timeout ms req vo get max queueing timeout ms if max queue timeout ms null return result of fail max queue timeout ms can t be null if max queue timeout ms return result of fail invalid max queue timeout ms max queue timeout ms entity set max queue timeout ms max queue timeout ms date date new date entity set gmt create date entity set gmt modify date try entity repository save entity catch throwable throwable logger error add gateway flow rule error throwable return result of throwable throwable if publish rule app ip port logger warn publish gateway flow rule fail after add return result of success entity 
gateway flow rule controller post mapping save json auth action auth service privilege type write rule public result gateway flow rule entity update flow rule request body update flow rule req vo req vo string app req vo get app if string util be blank app return result of fail app can t be null or empty long id req vo get id if id null return result of fail id can t be null gateway flow rule entity entity repository find by id id if entity null return result of fail gateway flow rule do not exist id id gateway param flow item vo param item req vo get param item if param item null gateway param flow item entity item entity new gateway param flow item entity entity set param item item entity client i p remote host header url cookie integer parse strategy param item get parse strategy if array as list param parse strategy client ip param parse strategy host param parse strategy header param parse strategy url param param parse strategy cookie contain parse strategy return result of fail invalid parse strategy parse strategy item entity set parse strategy param item get parse strategy header url cookie if array as list param parse strategy header param parse strategy url param param parse strategy cookie contain parse strategy string field name param item get field name if string util be blank field name return result of fail field name can t be null or empty item entity set field name param item get field name string pattern param item get pattern if string util be not empty pattern item entity set pattern pattern integer match strategy param item get match strategy if array as list param match strategy exact param match strategy contain param match strategy regex contain match strategy return result of fail invalid match strategy match strategy item entity set match strategy match strategy else entity set param item null qp integer grade req vo get grade if grade null return result of fail grade can t be null if array as list flow grade thread flow grade qp contain grade return result of fail invalid grade grade entity set grade grade qp double count req vo get count if count null return result of fail count can t be null if count return result of fail count should be at lease zero entity set count count long interval req vo get interval if interval null return result of fail interval can t be null if interval return result of fail interval should be greater than zero entity set interval interval integer interval unit req vo get interval unit if interval unit null return result of fail interval unit can t be null if array as list interval unit second interval unit minute interval unit hour interval unit day contain interval unit return result of fail invalid interval unit interval unit entity set interval unit interval unit integer control behavior req vo get control behavior if control behavior null return result of fail control behavior can t be null if array as list control behavior default control behavior rate limiter contain control behavior return result of fail invalid control behavior control behavior entity set control behavior control behavior if control behavior default control behavior burst size integer burst req vo get burst if burst null return result of fail burst can t be null if burst return result of fail invalid burst burst entity set burst burst else if control behavior rate limiter control behavior integer max queue timeout ms req vo get max queueing timeout ms if max queue timeout ms null return result of fail max queue timeout ms can t be null if max queue timeout ms return result of fail invalid max queue timeout ms max queue timeout ms entity set max queue timeout ms max queue timeout ms date date new date entity set gmt modify date try entity repository save entity catch throwable throwable logger error update gateway flow rule error throwable return result of throwable throwable if publish rule app entity get ip entity get port logger warn publish gateway flow rule fail after update return result of success entity 
gateway flow rule controller post mapping delete json auth action auth service privilege type delete rule public result long delete flow rule long id if id null return result of fail id can t be null gateway flow rule entity old entity repository find by id id if old entity null return result of success null try repository delete id catch throwable throwable logger error delete gateway flow rule error throwable return result of throwable throwable if publish rule old entity get app old entity get ip old entity get port logger warn publish gateway flow rule fail after delete return result of success id 
param flow rule controller get mapping rule auth action privilege type read rule public result list param flow rule entity api query all rule for machine request param string app request param string ip request param integer port if string util be empty app return result of fail app can not be null or empty if string util be empty ip return result of fail ip can not be null or empty if port null port return result of fail invalid parameter port if check if support app ip port return unsupported version try return sentinel api client fetch param flow rule of machine app ip port then apply repository save all then apply result of success get catch execution exception ex logger error error when query parameter flow rule ex get cause if be not support ex get cause return unsupported version else return result of throwable ex get cause catch throwable throwable logger error error when query parameter flow rule throwable return result of fail throwable get message 
param flow rule controller post mapping rule auth action auth service privilege type write rule public result param flow rule entity api add param flow rule request body param flow rule entity entity result param flow rule entity check result check entity internal entity if check result null return check result if check if support entity get app entity get ip entity get port return unsupported version entity set id null entity get rule set resource entity get resource trim date date new date entity set gmt create date entity set gmt modify date try entity repository save entity publish rule entity get app entity get ip entity get port get return result of success entity catch execution exception ex logger error error when add new parameter flow rule ex get cause if be not support ex get cause return unsupported version else return result of throwable ex get cause catch throwable throwable logger error error when add new parameter flow rule throwable return result of fail throwable get message 
param flow rule controller put mapping rule id auth action auth service privilege type write rule public result param flow rule entity api update param flow rule path variable id long id request body param flow rule entity entity if id null id return result of fail invalid id param flow rule entity old entity repository find by id id if old entity null return result of fail id id do not exist result param flow rule entity check result check entity internal entity if check result null return check result if check if support entity get app entity get ip entity get port return unsupported version entity set id id date date new date entity set gmt create old entity get gmt create entity set gmt modify date try entity repository save entity publish rule entity get app entity get ip entity get port get return result of success entity catch execution exception ex logger error error when update parameter flow rule id id ex get cause if be not support ex get cause return unsupported version else return result of throwable ex get cause catch throwable throwable logger error error when update parameter flow rule id id throwable return result of fail throwable get message 
param flow rule controller delete mapping rule id auth action privilege type delete rule public result long api delete rule path variable id long id if id null return result of fail id can not be null param flow rule entity old entity repository find by id id if old entity null return result of success null try repository delete id publish rule old entity get app old entity get ip old entity get port get return result of success id catch execution exception ex logger error error when delete parameter flow rule ex get cause if be not support ex get cause return unsupported version else return result of throwable ex get cause catch throwable throwable logger error error when delete parameter flow rule throwable return result of fail throwable get message 
system controller get mapping rule json auth action privilege type read rule public result list system rule entity api query machine rule string app string ip integer port result list system rule entity check result check basic param app ip port if check result null return check result try list system rule entity rule sentinel api client fetch system rule of machine app ip port rule repository save all rule return result of success rule catch throwable throwable logger error query machine system rule error throwable return result of throwable throwable 
system controller request map new json auth action privilege type write rule public result system rule entity api add string app string ip integer port double highest system load double highest cpu usage long avg rt long max thread double qp result system rule entity check result check basic param app ip port if check result null return check result int not null count count not null and not negative highest system load avg rt max thread qp highest cpu usage if not null count return result of fail only one of highest system load avg rt max thread qp highest cpu usage value must be set but not null count value get if null highest cpu usage highest cpu usage return result of fail highest cpu usage must between 0.0 1.0 system rule entity entity new system rule entity entity set app app trim entity set ip ip trim entity set port port be a fake value if null highest system load entity set highest system load highest system load else entity set highest system load 1 d if null highest cpu usage entity set highest cpu usage highest cpu usage else entity set highest cpu usage 1 d if avg rt null entity set avg rt avg rt else entity set avg rt 1 l if max thread null entity set max thread max thread else entity set max thread 1 l if qps null entity set qp qp else entity set qp 1 d date date new date entity set gmt create date entity set gmt modify date try entity repository save entity catch throwable throwable logger error add system rule error throwable return result of throwable throwable if publish rule app ip port logger warn publish system rule fail after rule add return result of success entity 
system controller get map save json auth action privilege type write rule public result system rule entity api update if not null long id string app double highest system load double highest cpu usage long avg rt long max thread double qp if id null return result of fail id can t be null system rule entity entity repository find by id id if entity null return result of fail id id dose not exist if string util be not blank app entity set app app trim if highest system load null if highest system load return result of fail highest system load must entity set highest system load highest system load if highest cpu usage null if highest cpu usage return result of fail highest cpu usage must if highest cpu usage return result of fail highest cpu usage must entity set highest cpu usage highest cpu usage if avg rt null if avg rt return result of fail avg rt must entity set avg rt avg rt if max thread null if max thread return result of fail max thread must entity set max thread max thread if qps null if qp return result of fail qp must entity set qp qps date date new date entity set gmt modify date try entity repository save entity catch throwable throwable logger error save error throwable return result of throwable throwable if publish rule entity get app entity get ip entity get port logger info publish system rule fail after rule update return result of success entity 
system controller request map delete json auth action privilege type delete rule public result delete long id if id null return result of fail id can t be null system rule entity old entity repository find by id id if old entity null return result of success null try repository delete id catch throwable throwable logger error delete error throwable return result of throwable throwable if publish rule old entity get app old entity get ip old entity get port logger info publish system rule fail after rule delete return result of success id 
flow controller v2 get mapping rule auth action privilege type read rule public result list flow rule entity api query machine rule request param string app if string util be empty app return result of fail app can t be null or empty try list flow rule entity rule rule provider get rule app if rule null rule be empty for flow rule entity entity rule entity set app app if entity get cluster config null entity get cluster config get flow id null entity set id entity get cluster config get flow id rule repository save all rule return result of success rule catch throwable throwable logger error error when query flow rule throwable return result of throwable throwable 
flow controller v2 post mapping rule auth action value auth service privilege type write rule public result flow rule entity api add flow rule request body flow rule entity entity result flow rule entity check result check entity internal entity if check result null return check result entity set id null date date new date entity set gmt create date entity set gmt modify date entity set limit app entity get limit app trim entity set resource entity get resource trim try entity repository save entity publish rule entity get app catch throwable throwable logger error fail to add flow rule throwable return result of throwable throwable return result of success entity 
flow controller v2 put mapping rule id auth action auth service privilege type write rule public result flow rule entity api update flow rule path variable id long id request body flow rule entity entity if id null id return result of fail invalid id flow rule entity old entity repository find by id id if old entity null return result of fail id id do not exist if entity null return result of fail invalid body entity set app old entity get app entity set ip old entity get ip entity set port old entity get port result flow rule entity check result check entity internal entity if check result null return check result entity set id id date date new date entity set gmt create old entity get gmt create entity set gmt modify date try entity repository save entity if entity null return result of fail save entity fail publish rule old entity get app catch throwable throwable logger error fail to update flow rule throwable return result of throwable throwable return result of success entity 
flow controller v2 delete mapping rule id auth action privilege type delete rule public result long api delete rule path variable id long id if id null id return result of fail invalid id flow rule entity old entity repository find by id id if old entity null return result of success null try repository delete id publish rule old entity get app catch exception e return result of fail e get message return result of success id 
