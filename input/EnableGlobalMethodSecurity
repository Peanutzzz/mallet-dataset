web security config conditional on miss profile auth configuration enable web security enable global method security pre post enable true public class web security config extend web security configurer adapter override protect void configure http security http throw exception http http basic http csrf disable http header frame option same origin although the authentication below be useless we may not remove they for backward compatibility because if we remove they and the old client before 0.9 still send the authentication information the server will return which should cause big problem we may remove the follow once we remove spring security from apollo autowire public void configure global authentication manager builder auth throw exception auth in memory authentication with user user password role user and with user apollo password role user admin 
auth configuration order profile auth configuration enable web security enable global method security pre post enable true static class spring security configurer extend web security configurer adapter public static final string user role user override protect void configure http security http throw exception http csrf disable http header frame option same origin http authorize request ant matcher prometheus metric openapi vendor style script view img i18n prefix path permit all ant matcher have any role user role http form login login page signin default success url true permit all failure url signin error and http basic http logout logout url user logout invalidate http session true clear authentication true logout success url signin logout http exception handle authentication entry point new login url authentication entry point signin 
auth configuration order profile ldap configuration enable web security enable global method security pre post enable true static class spring security l d a p configurer extend web security configurer adapter private final ldap property ldap property private final ldap context source ldap context source private final ldap extend property ldap extend property public spring security l d a p configurer final ldap property ldap property final ldap context source ldap context source final ldap extend property ldap extend property this ldap property ldap property this ldap context source ldap context source this ldap extend property ldap extend property bean public filter base ldap user search user search if ldap extend property get group null string util be blank ldap extend property get group get group search filter base ldap user search filter base ldap user search new filter base ldap user search ldap property get search filter ldap context source filter base ldap user search set search subtree true return filter base ldap user search filter ldap by group user search filter ldap by group user search new filter ldap by group user search ldap property get base ldap property get search filter ldap extend property get group get group base ldap context source ldap extend property get group get group search ldap extend property get map get rdn key ldap extend property get group get group membership ldap extend property get map get login id filter ldap by group user search set search subtree true return filter ldap by group user search bean public ldap authentication provider ldap auth provider bind authenticator bind authenticator new bind authenticator ldap context source bind authenticator set user search user search default ldap authority populator default auth auto configuration new default ldap authority populator ldap context source null default auth auto configuration set ignore partial result exception true default auth auto configuration set search subtree true rewrite the logic of ldap authentication provider with apollo ldap authentication provider use user id in ldap system instead of user id input by user return new apollo ldap authentication provider bind authenticator default auth auto configuration ldap extend property override protect void configure http security http throw exception http csrf disable http header frame option same origin http authorize request ant matcher prometheus metric openapi vendor style script view img i18n prefix path permit all ant matcher authenticate http form login login page signin default success url true permit all failure url signin error and http basic http logout logout url user logout invalidate http session true clear authentication true logout success url signin logout http exception handle authentication entry point new login url authentication entry point signin override protect void configure authentication manager builder auth throw exception auth authentication provider ldap auth provider 
auth configuration conditional on miss profile auth ldap configuration enable web security enable global method security pre post enable true static class default web security config extend web security configurer adapter override protect void configure http security http throw exception http csrf disable http header frame option same origin 
naco auth config enable global method security pre post enable true public class naco auth config extend web security configurer adapter public static final string authorization header authorization public static final string security ignore url spill char public static final string login entry point v1 auth login public static final string token base auth entry point v1 auth public static final string token prefix bearer public static final string console resource name prefix console autowire private environment env autowire private jwt token manager token provider autowire private auth configs auth configs autowired private naco user detail service impl user detail service bean name bean id authentication manager override public authentication manager authentication manager bean throw exception return super authentication manager bean override public void configure web security web string ignore url null if auth system type naco name equal ignore case auth config get naco auth system type ignore url if string util be blank auth config get naco auth system type ignore url env get property naco security ignore url if string util be not blank ignore url for string each ignore url trim split security ignore url spill char web ignore ant matcher each trim override protect void configure authentication manager builder auth throw exception auth user detail service user detail service password encoder password encoder override protect void configure http security http throw exception if string util be blank auth config get naco auth system type http csrf disable cor we don t need csrf for jwt base authentication and session management session creation policy session creation policy stateless and authorize request request matcher cor util be pre flight request permit all ant matcher login entry point permit all and authorize request ant matcher token base auth entry point authenticate and exception handle authentication entry point new jwt authentication entry point disable cache http header cache control http add filter before new jwt authentication token filter token provider username password authentication filter class bean public password encoder password encoder return new b crypt password encoder 
