sentinel rule locator override retryable interceptor config server retry interceptor public org springframework core env property source locate org springframework core env environment environment config client property property this default property override environment composite property source composite new composite property source config service rest template rest template this rest template null get secure rest template property this rest template exception error null string error body null try string label new string if string util have text property get label label string util comma delimit list to string array property get label string state config client state holder get state try all the label until one work for string label label environment result get remote environment rest template property label trim state if result null log result result get property source can be null if use xml if result get property source null for property source source result get property source suppress warning unchecked map string object map map string object source get source composite add property source new map property source source get name map sentinel rule storage set rule source composite return composite catch http server error exception e error e if media type application json include e get response header get content type error body e get response body as string catch exception e error e if property be fail fast throw new illegal state exception could not locate property source and the fail fast property be set fail error record log warn could not locate property source error body null error null label not find error get message error body return null 
